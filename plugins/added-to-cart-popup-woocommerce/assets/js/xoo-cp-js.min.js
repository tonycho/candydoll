jQuery(document).ready(function(t){function a(){t(".xoo-cp-opac").show(),t(".xoo-cp-modal").addClass("xoo-cp-active")}function o(a){t.each(a.target.classList,function(a,o){("xoo-cp-close"==o||"xoo-cp-modal"==o)&&(t(".xoo-cp-opac").hide(),t(".xoo-cp-modal").removeClass("xoo-cp-active"),t(".xoo-cp-atcn , .xoo-cp-content").html(""))})}function e(){t(".xoo-cp-outer").show()}function r(){t(".xoo-cp-outer").hide()}function c(a){t(".xoo-cp-added",a).remove();var o=a.parents("form.cart").find(".qty");o.length>0&&o.val(o.attr("min")||1),t(".added_to_cart").remove()}function n(a,o){t(document.body).trigger("adding_to_cart",[a,o]),t.ajax({url:xoo_cp_localize.wc_ajax_url.toString().replace("%%endpoint%%","xoo_cp_add_to_cart"),type:"POST",data:t.param(o),success:function(o){t(".xoo-cp-adding",a).remove(),o.fragments?(t(document.body).trigger("added_to_cart",[o.fragments,o.cart_hash,a]),a.append('<span class="xoo-cp-icon-check xoo-cp-added"></span>')):o.error?show_notice("error",o.error):console.log(o),xoo_cp_localize.reset_cart&&c(a)}})}function i(a,o){e(),t.ajax({url:xoo_cp_localize.wc_ajax_url.toString().replace("%%endpoint%%","xoo_cp_update_cart"),type:"POST",data:{cart_key:a,new_qty:o},success:function(a){if(a.fragments){var o=a.fragments,e=a.cart_hash;if(t.each(a.fragments,function(a,o){t(a).replaceWith(o),t(a).stop(!0).css("opacity","1").unblock()}),wc_cart_fragments_params){var c=wc_cart_fragments_params.ajax_url.toString()+"-wc_cart_hash";sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(o)),localStorage.setItem(c,e),sessionStorage.setItem(c,e)}t(document.body).trigger("wc_fragments_loaded")}else console.log(a);r()}})}var s;t(document.body).on("added_to_cart",function(){a()}),t(document).on("click",".xoo-cp-close , .xoo-cp-modal",o),t(document).on("submit","form.cart",function(a){a.preventDefault();var o=t(this),e=o.find('button[type="submit"]');t(".xoo-cp-added",e).remove(),e.append('<span class="xoo-cp-icon-spinner xoo-cp-adding" aria-hidden="true"></span>');var r=o.serializeArray();e.attr("name")&&"add-to-cart"==e.attr("name")&&e.attr("value")&&r.push({name:"add-to-cart",value:e.attr("value")}),r.push({name:"action",value:"xoo_cp_add_to_cart"}),n(e,r)}),t(document).on("focusin",".xoo-cp-qty",function(){s=t(this).val()}),t(document).on("change",".xoo-cp-qty",function(a){var o=t(this),e=parseFloat(t(this).val()),r=parseFloat(t(this).attr("step")),c=parseFloat(t(this).attr("min")),n=parseFloat(t(this).attr("max")),p=!1;if(0===e)return void o.parents(".xoo-cp-pdetails").find(".xoo-cp-remove-pd").trigger("click");if(isNaN(e)||0>e)p=!0;else if(e>n&&n>0)alert("Maximum Quantity: "+n),p=!0;else if(c>e)p=!0;else if(e%r!==0)alert("Quantity can only be purchased in multiple of "+r),p=!0;else{var d=t(this).parents("tr").data("xoo_cp_key");i(d,e)}p===!0&&t(this).val(s)}),t(document).on("click",".xcp-chng",function(){var a=t(this),o=a.siblings(".xoo-cp-qty");o.trigger("focusin");var e=parseFloat(o.val()),r=parseFloat(o.attr("step")),c=parseFloat(o.attr("min")),n=parseFloat(o.attr("max"));if(a.hasClass("xcp-plus")){var s=e+r;if(s>n&&n>0)return void alert("Maximum Quantity: "+n)}else if(a.hasClass("xcp-minus")){var s=e-r;if(0===s)return void a.parents(".xoo-cp-pdetails").find(".xoo-cp-remove .xcp-icon").trigger("click");if(c>s)return;if(0>e)return void alert("Invalid")}var p=t(this).parents("tr").data("xoo_cp_key");i(p,s)}),t(document).on("click",".xoo-cp-remove-pd",function(a){a.preventDefault();var o=t(this).parents("tr").data("xoo_cp_key");i(o,0)})});